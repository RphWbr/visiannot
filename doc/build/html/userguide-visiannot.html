

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>User guide: ViSiAnnoT &mdash; ViSiAnnoT 0.2.0 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="User guide: configuration" href="userguide-configuration.html" />
    <link rel="prev" title="Installation" href="install.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> ViSiAnnoT
          

          
          </a>

          
            
            
              <div class="version">
                0.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">User guide: ViSiAnnoT</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#video-visualization-with-multiple-cameras">Video visualization with multiple cameras</a></li>
<li class="toctree-l2"><a class="reference internal" href="#signal-visualization">Signal visualization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#signal-format">Signal format</a></li>
<li class="toctree-l3"><a class="reference internal" href="#multiple-signals-on-the-same-plot">Multiple signals on the same plot</a></li>
<li class="toctree-l3"><a class="reference internal" href="#audio-signal-visualization">Audio signal visualization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#zoom-tools">Zoom tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="#threshold-values">Threshold values</a></li>
<li class="toctree-l3"><a class="reference internal" href="#temporal-intervals">Temporal intervals</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#combined-video-and-signal-visualization">Combined video and signal visualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tools-for-fast-navigation">Tools for fast navigation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#management-of-long-recording">Management of long recording</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#set-of-synchronized-files">Set of synchronized files</a></li>
<li class="toctree-l3"><a class="reference internal" href="#set-of-asynchronous-files">Set of asynchronous files</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#multi-label-annotation-tools">Multi-label annotation tools</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#events-annotation-tool">Events annotation tool</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#storage-of-events-annotation-files">Storage of events annotation files</a></li>
<li class="toctree-l4"><a class="reference internal" href="#description-of-events-annotation-files">Description of events annotation files</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#image-extraction-tool">Image extraction tool</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#layout-modes">Layout modes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#keyboard-mouse-interactions">Keyboard/mouse interactions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#keyboard">Keyboard</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mouse-click-on-the-signal-plots">Mouse click on the signal plots</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="userguide-configuration.html">User guide: configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="userguide-toolspyqt.html">User guide: ToolsPyQt</a></li>
<li class="toctree-l1"><a class="reference internal" href="userguide-toolspyqtgraph.html">User guide: ToolsPyqtgraph</a></li>
<li class="toctree-l1"><a class="reference internal" href="exe.html">Creating a standalone executable</a></li>
<li class="toctree-l1"><a class="reference internal" href="software.html">Software description</a></li>
<li class="toctree-l1"><a class="reference internal" href="further.html">Further developments</a></li>
<li class="toctree-l1"><a class="reference internal" href="APIreference/index.html">API Reference</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">ViSiAnnoT</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>User guide: ViSiAnnoT</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/userguide-visiannot.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="user-guide-visiannot">
<span id="userguide-visiannot"></span><h1>User guide: ViSiAnnoT<a class="headerlink" href="#user-guide-visiannot" title="Permalink to this headline">¶</a></h1>
<p><strong>ViSiAnnoT</strong> has been designed to be as easy to use as possible, while being highly configurable so that it could meet a variety of needs. In this section, we introduce the different features of <strong>ViSiAnnoT</strong> and we illustrate them with examples.</p>
<div class="section" id="video-visualization-with-multiple-cameras">
<span id="video"></span><h2>Video visualization with multiple cameras<a class="headerlink" href="#video-visualization-with-multiple-cameras" title="Permalink to this headline">¶</a></h2>
<p><strong>ViSiAnnoT</strong> can be used as a simple video player. Supported formats are the ones that are supported by <strong>OpenCV</strong> (for instance mp4 and avi). It is possible to play as many videos as wanted simultaneously, provided that they are synchronized. This is useful when the user has video files of several synchronized cameras. The name of the video files must contain the beginning datetime of the video, so that the software can check if the videos are indeed synchronized (a shift of one second is authorized between the video files).</p>
<p>Here is an example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">visiannot.visiannot</span> <span class="k">import</span> <span class="n">ViSiAnnoT</span>

<span class="c1"># video paths</span>
<span class="n">path_video_1</span> <span class="o">=</span> <span class="s2">&quot;data/2017-12-19T11-33-46_color.mp4&quot;</span>
<span class="n">path_video_2</span> <span class="o">=</span> <span class="s2">&quot;data/2017-12-19T11-33-46_BW1.mp4&quot;</span>
<span class="n">path_video_3</span> <span class="o">=</span> <span class="s2">&quot;data/2017-12-19T11-33-46_BW2.mp4&quot;</span>

<span class="c1"># video configuration</span>
<span class="n">video_dict</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">video_dict</span><span class="p">[</span><span class="s2">&quot;color&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">path_video_1</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">T%H-%M-%S&quot;</span><span class="p">)</span>
<span class="n">video_dict</span><span class="p">[</span><span class="s2">&quot;BW1&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">path_video_2</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">T%H-%M-%S&quot;</span><span class="p">)</span>
<span class="n">video_dict</span><span class="p">[</span><span class="s2">&quot;BW2&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">path_video_3</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">T%H-%M-%S&quot;</span><span class="p">)</span>

<span class="c1"># create ViSiAnnoT window</span>
<span class="n">win_visiannot</span> <span class="o">=</span> <span class="n">ViSiAnnoT</span><span class="p">(</span><span class="n">video_dict</span><span class="p">,</span> <span class="p">{})</span>
</pre></div>
</div>
<p>From the sub-package <strong>visiannot</strong> we import the class <a class="reference internal" href="APIreference/visiannot/ViSiAnnoT/index.html#visiannot.visiannot.ViSiAnnoT.ViSiAnnoT" title="visiannot.visiannot.ViSiAnnoT.ViSiAnnoT"><code class="xref py py-class docutils literal notranslate"><span class="pre">ViSiAnnoT</span></code></a>. We have a set of 3 synchronized videos (one in color and two in black &amp; white), located in the folder <em>data</em>. The configuration dictionary <code class="docutils literal notranslate"><span class="pre">video_dict</span></code> specifies to <a class="reference internal" href="APIreference/visiannot/ViSiAnnoT/index.html#visiannot.visiannot.ViSiAnnoT.ViSiAnnoT" title="visiannot.visiannot.ViSiAnnoT.ViSiAnnoT"><code class="xref py py-class docutils literal notranslate"><span class="pre">ViSiAnnoT</span></code></a> where to find the videos and how to get the beginning datetime in the video file name. Each item corresponds to one camera, the key is the camera ID and the value is a list/tuple of 4 elements:</p>
<ul class="simple">
<li><p>Path to the video file,</p></li>
<li><p>Delimiter to get the beginning datetime in the video file name,</p></li>
<li><p>Position of the beginning datetime in the video file name, according to the delimiter,</p></li>
<li><p>Format of the beginning datetime in the video file name (<code class="docutils literal notranslate"><span class="pre">&quot;posix&quot;</span></code> or format compliant with <code class="docutils literal notranslate"><span class="pre">datetime</span></code>, see <a class="reference external" href="https://docs.python.org/3/library/datetime.html#strftime-and-strptime-format-codes">https://docs.python.org/3/library/datetime.html#strftime-and-strptime-format-codes</a>).</p></li>
</ul>
<p>The instance of <a class="reference internal" href="APIreference/visiannot/ViSiAnnoT/index.html#visiannot.visiannot.ViSiAnnoT.ViSiAnnoT" title="visiannot.visiannot.ViSiAnnoT.ViSiAnnoT"><code class="xref py py-class docutils literal notranslate"><span class="pre">ViSiAnnoT</span></code></a> must be stored in a variable in order to have the window displayed.</p>
<p><a class="reference internal" href="#fig-example-video"><span class="std std-numref">Fig. 2</span></a> shows a screenshot of the resulting window. At the bottom, there is the progress bar which gives the current temporal position with the red dot and allows to navigate in the video. We call the red dot “navigation point”. The temporal axis is expressed in absolute time. It is possible to navigate in the video by clicking in the progress bar and dragging the navigation point. The user can start/stop the video playback with the space key.</p>
<div class="figure align-default" id="id1">
<span id="fig-example-video"></span><img alt="_images/example_video.png" src="_images/example_video.png" />
<p class="caption"><span class="caption-number">Fig. 2 </span><span class="caption-text">Screenshot of ViSiAnnoT used as a video player</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
<p>If audio is contained in the video file, there is currently no audio playback.</p>
</div>
<div class="section" id="signal-visualization">
<span id="signal"></span><h2>Signal visualization<a class="headerlink" href="#signal-visualization" title="Permalink to this headline">¶</a></h2>
<p><strong>ViSiAnnoT</strong> can be used as a simple signal viewer. The user can define as many widgets as wanted (which can be seen as figures) and plot as many signals as wanted in a widget. As for video visualization, the signal files should be synchronized.</p>
<div class="section" id="signal-format">
<h3>Signal format<a class="headerlink" href="#signal-format" title="Permalink to this headline">¶</a></h3>
<p>Supported formats are txt, mat, h5 and wav. There are two ways to store the signal:</p>
<ul class="simple">
<li><p>As a vector of length <img class="math" src="_images/math/dc9ec83f430cb60bdb71e29cf6de5edefc3f8346.png" alt="n_{sample}"/>, where <img class="math" src="_images/math/8be47b02891fe663dcb0f39dcb155d73a6c7b751.png" alt="n_{sample} \in \mathbb{N}"/> is the number of samples in the file. In this case, the frequency is constant and must be provided by the user.</p></li>
<li><p>As a matrix of shape <img class="math" src="_images/math/4c1d435f2dc36238c6e7513994fd15113503285b.png" alt="(n_{sample},2)"/>, where the first column contains the timestamp of each sample and the second column contains the value of the samples. This is particularly useful for non regularly sampled signals. The timestamps are expressed in milliseconds relatively to the beginning datetime of the file.</p></li>
</ul>
<p>In case several signals are plotted, the fact that their frequencies may be different is automatically managed.</p>
<p>An example of non regularly sampled signal is the RR series, which is extracted from the physiological signal ECG (electrocardiogram). The ECG measures the electrical activity of the heart beat. During a heart beat cycle, there is a peak that can be detected. The RR series is defined as the difference between two successive peaks in the ECG. Since these peaks are not regular, the RR series is non regularly sampled.</p>
</div>
<div class="section" id="multiple-signals-on-the-same-plot">
<span id="signal-ex"></span><h3>Multiple signals on the same plot<a class="headerlink" href="#multiple-signals-on-the-same-plot" title="Permalink to this headline">¶</a></h3>
<p><strong>ViSiAnnoT</strong> allows to display as many signals as wanted on the same plot. A default plot style can be used for up to 10 signals on the same plot. Since plotting relies on <a class="reference external" href="http://pyqtgraph.org/">Pyqtgraph</a>, all the configurations available in this package can be used to customize plot style (see keyword arguments of <a class="reference external" href="https://pyqtgraph.readthedocs.io/en/latest/graphicsItems/plotdataitem.html#pyqtgraph.PlotDataItem.__init__">PlotDataItem</a> constructor).</p>
<p>Here is an example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">visiannot.visiannot</span> <span class="k">import</span> <span class="n">ViSiAnnoT</span>

<span class="c1"># signal paths</span>
<span class="n">path_ecg</span> <span class="o">=</span> <span class="s2">&quot;data/20170423T002840_ecg.txt&quot;</span>
<span class="n">path_resp</span> <span class="o">=</span> <span class="s2">&quot;data/20170423T002840_resp.txt&quot;</span>
<span class="n">path_tqrs</span> <span class="o">=</span> <span class="s2">&quot;data/20170423T002840_tqrs.mat&quot;</span>

<span class="c1"># define plot style</span>
<span class="n">plot_style_tqrs</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;pen&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="s1">&#39;symbol&#39;</span><span class="p">:</span> <span class="s1">&#39;+&#39;</span><span class="p">,</span>
    <span class="s1">&#39;symbolPen&#39;</span><span class="p">:</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span>
    <span class="s1">&#39;symbolSize&#39;</span><span class="p">:</span> <span class="mi">10</span>
<span class="p">}</span>

<span class="n">plot_style_resp</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;pen&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="s1">&#39;m&#39;</span><span class="p">,</span> <span class="s1">&#39;width&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}}</span>

<span class="c1"># signal configuration</span>
<span class="n">signal_dict</span> <span class="o">=</span> <span class="p">{}</span>

<span class="n">signal_dict</span><span class="p">[</span><span class="s2">&quot;ECG&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">[</span><span class="n">path_ecg</span><span class="p">,</span> <span class="s2">&quot;ecg&quot;</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;%Y%m</span><span class="si">%d</span><span class="s2">T%H%M%S&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">],</span>
    <span class="p">[</span><span class="n">path_tqrs</span><span class="p">,</span> <span class="s2">&quot;tqrs&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;%Y%m</span><span class="si">%d</span><span class="s2">T%H%M%S&quot;</span><span class="p">,</span> <span class="n">plot_style_tqrs</span><span class="p">]</span>
<span class="p">]</span>

<span class="n">signal_dict</span><span class="p">[</span><span class="s2">&quot;Respiration&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">[</span><span class="n">path_resp</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="mf">62.5</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;%Y%m</span><span class="si">%d</span><span class="s2">T%H%M%S&quot;</span><span class="p">,</span> <span class="n">plot_style_resp</span><span class="p">]</span>
<span class="p">]</span>

<span class="c1"># create ViSiAnnoT window</span>
<span class="n">win_visiannot</span> <span class="o">=</span> <span class="n">ViSiAnnoT</span><span class="p">(</span>
    <span class="p">{},</span> <span class="n">signal_dict</span><span class="p">,</span> <span class="n">flag_pause_status</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">layout_mode</span><span class="o">=</span><span class="mi">2</span>
<span class="p">)</span>
</pre></div>
</div>
<p>From the sub-package <strong>visiannot</strong> we import the class <a class="reference internal" href="APIreference/visiannot/ViSiAnnoT/index.html#visiannot.visiannot.ViSiAnnoT.ViSiAnnoT" title="visiannot.visiannot.ViSiAnnoT.ViSiAnnoT"><code class="xref py py-class docutils literal notranslate"><span class="pre">ViSiAnnoT</span></code></a>. We have a set of 3 synchronized signals (ECG, respiration and QRS beat detection), located in the folder <em>data</em>. The configuration dictionary <code class="docutils literal notranslate"><span class="pre">signal_dict</span></code> specifies to <a class="reference internal" href="APIreference/visiannot/ViSiAnnoT/index.html#visiannot.visiannot.ViSiAnnoT.ViSiAnnoT" title="visiannot.visiannot.ViSiAnnoT.ViSiAnnoT"><code class="xref py py-class docutils literal notranslate"><span class="pre">ViSiAnnoT</span></code></a> where to find the signal files, what is the frequency of the signals, how to get the beginning datetime of the signal file and how to plot. Each item corresponds to one signal widget. The key is the widget ID, which is used as Y axis label. The value is a nested configuration list where each element corresponds to one signal to plot and is a list of 7 elements:</p>
<ul class="simple">
<li><p>Path to the signal file,</p></li>
<li><p>Key to access the data in the file (in case of .h5 or .mat, set it to <code class="docutils literal notranslate"><span class="pre">''</span></code> otherwise), also used a legend,</p></li>
<li><p>Signal frequency (may also be a string with path to the frequency attribute in case of h5 file), set it to <code class="docutils literal notranslate"><span class="pre">0</span></code> in case of non-regularly sampled signal,</p></li>
<li><p>Delimiter to get the beginning datetime in the signal file name,</p></li>
<li><p>Position of the beginning datetime in the signal file name, according to the delimiter,</p></li>
<li><p>Format of the beginning datetime in the signal file name (<code class="docutils literal notranslate"><span class="pre">&quot;posix&quot;</span></code> or format compliant with <code class="docutils literal notranslate"><span class="pre">datetime</span></code>, see <a class="reference external" href="https://docs.python.org/3/library/datetime.html#strftime-and-strptime-format-codes">https://docs.python.org/3/library/datetime.html#strftime-and-strptime-format-codes</a>),</p></li>
<li><p>Dictionary with plot style.</p></li>
</ul>
<p>The keyword argument <code class="docutils literal notranslate"><span class="pre">pause_status</span></code> is set to True so that the video playback is disabled at launch. The instance of <a class="reference internal" href="APIreference/visiannot/ViSiAnnoT/index.html#visiannot.visiannot.ViSiAnnoT.ViSiAnnoT" title="visiannot.visiannot.ViSiAnnoT.ViSiAnnoT"><code class="xref py py-class docutils literal notranslate"><span class="pre">ViSiAnnoT</span></code></a> must be stored in a variable in order to have the window displayed.</p>
<p><a class="reference internal" href="#fig-example-signal"><span class="std std-numref">Fig. 3</span></a> shows a screenshot of the resulting window. On the first plot, there are two signals: ECG (sampled at 500 Hz) and QRS beat detection (non regularly sampled). On the second plot, there is one signal: respiration. The default plot style is used for the ECG (blue curve), whereas a custom plot style is defined for QRS beat detection (red dots) and respiration (purple curve). We call “temporal cursor” the red vertical line on the signal plots giving the current temporal position. It is linked to the red dot in the progress bar, which is above the signal plots.</p>
<div class="figure align-default" id="id2">
<span id="fig-example-signal"></span><img alt="_images/example_signal.png" src="_images/example_signal.png" />
<p class="caption"><span class="caption-number">Fig. 3 </span><span class="caption-text">Screenshot of ViSiAnnoT used as a signal viewer</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="audio-signal-visualization">
<h3>Audio signal visualization<a class="headerlink" href="#audio-signal-visualization" title="Permalink to this headline">¶</a></h3>
<p>Regarding the visualization of an audio signal, the configuration is slightly different since the user must provide the channel to display (left or right). Here is an example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">visiannot.visiannot</span> <span class="k">import</span> <span class="n">ViSiAnnoT</span>

<span class="c1"># audio path</span>
<span class="n">path_audio</span> <span class="o">=</span> <span class="s2">&quot;data/Zef.wav&quot;</span>

<span class="c1"># signal configuration</span>
<span class="n">signal_dict</span> <span class="o">=</span> <span class="p">{}</span>

<span class="n">signal_dict</span><span class="p">[</span><span class="s2">&quot;Audio L&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[[</span><span class="n">path_audio</span><span class="p">,</span> <span class="s2">&quot;Left channel&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">]]</span>
<span class="n">signal_dict</span><span class="p">[</span><span class="s2">&quot;Audio R&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[[</span><span class="n">path_audio</span><span class="p">,</span> <span class="s2">&quot;Right channel&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">]]</span>

<span class="c1"># create ViSiAnnoT window</span>
<span class="n">win_visiannot</span> <span class="o">=</span> <span class="n">ViSiAnnoT</span><span class="p">(</span>
    <span class="p">{},</span> <span class="n">signal_dict</span><span class="p">,</span> <span class="n">flag_pause_status</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">layout_mode</span><span class="o">=</span><span class="mi">2</span>
<span class="p">)</span>
</pre></div>
</div>
<p>We define two signal widgets: “Audio L” and “Audio R”. They both take the same audio file as input.</p>
<p>In order to specify the channel to display in each plot, we use the key to access data and set it to “Left channel” and “Right channel”. The key word for channel selection is “left” or “right”, regardless of the letter capitalization and the position in the string. If no channel is specified, then the left channel is displayed by default.</p>
<p>The signal frequency is automatically retrieved from the wav file, so in the configuration list it can be set to anything (in this example <code class="docutils literal notranslate"><span class="pre">0</span></code>).</p>
<p>The beginning datetime is not contained in the audio file name, so one of the three related variables is set to <code class="docutils literal notranslate"><span class="pre">None</span></code> and a default datetime is defined (2000/01/01 at 00:00:00).</p>
<p><a class="reference internal" href="#fig-example-signal"><span class="std std-numref">Fig. 3</span></a> shows a screenshot of the resulting window.</p>
<div class="figure align-default" id="id3">
<span id="fig-example-audio"></span><img alt="_images/example_audio.png" src="_images/example_audio.png" />
<p class="caption"><span class="caption-number">Fig. 4 </span><span class="caption-text">Screenshot of ViSiAnnoT used as an audio signal viewer</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="zoom-tools">
<h3>Zoom tools<a class="headerlink" href="#zoom-tools" title="Permalink to this headline">¶</a></h3>
<p>The default zoom of PyQtGraph is available for the Y axis of the signal plots and is overwritten for the X axis so that all the signal plots are linked. Thus the zoom tools described here only affects the temporal axis.</p>
<p>Based on <a class="reference internal" href="#fig-example-signal"><span class="std std-numref">Fig. 3</span></a>, <a class="reference internal" href="#fig-example-signal-zoom"><span class="std std-numref">Fig. 5</span></a> illustrates the temporal zoom. We call “temporal range” the period of the signals that is displayed and “temporal range duration” its duration. In the progress bar, the black lines delimit the temporal range. We can see that the temporal range duration in <a class="reference internal" href="#fig-example-signal"><span class="std std-numref">Fig. 3</span></a> is 00h30min00s and becomes 00h00min21s after zoom in <a class="reference internal" href="#fig-example-signal-zoom"><span class="std std-numref">Fig. 5</span></a>. The black lines of the progress bar have also moved to show what part of the signals is displayed.</p>
<div class="figure align-default" id="id4">
<span id="fig-example-signal-zoom"></span><img alt="_images/example_signal_zoom.png" src="_images/example_signal_zoom.png" />
<p class="caption"><span class="caption-number">Fig. 5 </span><span class="caption-text">Screenshot of ViSiAnnoT used as a signal viewer after zoom</span><a class="headerlink" href="#id4" title="Permalink to this image">¶</a></p>
</div>
<p>The user can zoom in/out around the temporal cursor by using the two buttons looking like magnifying glass. It is also possible to directly zoom out in order to visualize the full signals by using the button looking like an eye. The buttons can be seen in the top left corner of the window.</p>
<p>The temporal range can be defined with the combo list “Temporal range duration”. The user can select the duration of the new temporal range which starts at the current position of the temporal cursor.</p>
</div>
<div class="section" id="threshold-values">
<span id="threshold"></span><h3>Threshold values<a class="headerlink" href="#threshold-values" title="Permalink to this headline">¶</a></h3>
<p>Threshold values can be drawn as horizontal lines on a signal plot. It may be useful to identify temporal intervals where a signal is above or below a specific value.</p>
<p>Here is an example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">visiannot.visiannot</span> <span class="k">import</span> <span class="n">ViSiAnnoT</span>

<span class="c1"># signal paths</span>
<span class="n">path_ecg</span> <span class="o">=</span> <span class="s2">&quot;data/20170423T002840_ecg.txt&quot;</span>
<span class="n">path_tqrs</span> <span class="o">=</span> <span class="s2">&quot;data/20170423T002840_tqrs.mat&quot;</span>

<span class="c1"># define plot style</span>
<span class="n">plot_style_tqrs</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;pen&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s1">&#39;symbol&#39;</span><span class="p">:</span> <span class="s1">&#39;+&#39;</span><span class="p">,</span>
        <span class="s1">&#39;symbolPen&#39;</span><span class="p">:</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span>
        <span class="s1">&#39;symbolSize&#39;</span><span class="p">:</span> <span class="mi">10</span>
<span class="p">}</span>

<span class="c1"># signal configuration</span>
<span class="n">signal_dict</span> <span class="o">=</span> <span class="p">{}</span>

<span class="n">signal_dict</span><span class="p">[</span><span class="s2">&quot;ECG&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">[</span><span class="n">path_ecg</span><span class="p">,</span> <span class="s2">&quot;ecg&quot;</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;%Y%m</span><span class="si">%d</span><span class="s2">T%H%M%S&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">],</span>
        <span class="p">[</span><span class="n">path_tqrs</span><span class="p">,</span> <span class="s2">&quot;tqrs&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;%Y%m</span><span class="si">%d</span><span class="s2">T%H%M%S&quot;</span><span class="p">,</span> <span class="n">plot_style_tqrs</span><span class="p">]</span>
<span class="p">]</span>

<span class="n">signal_dict</span><span class="p">[</span><span class="s2">&quot;RR&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[[</span><span class="n">path_tqrs</span><span class="p">,</span> <span class="s2">&quot;rr&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;%Y%m</span><span class="si">%d</span><span class="s2">T%H%M%S&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">]]</span>

<span class="c1"># threshold configuration</span>
<span class="n">threshold_dict</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">threshold_dict</span><span class="p">[</span><span class="s2">&quot;RR&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">[</span><span class="mi">600</span><span class="p">,</span> <span class="s2">&quot;#336600&quot;</span><span class="p">],</span>
        <span class="p">[</span><span class="mi">750</span><span class="p">,</span> <span class="s2">&quot;#B22222&quot;</span><span class="p">]</span>
<span class="p">]</span>

<span class="c1"># create ViSiAnnoT window</span>
<span class="n">win_visiannot</span> <span class="o">=</span> <span class="n">ViSiAnnoT</span><span class="p">(</span>
        <span class="p">{},</span> <span class="n">signal_dict</span><span class="p">,</span> <span class="n">flag_pause_status</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">layout_mode</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
        <span class="n">threshold_dict</span><span class="o">=</span><span class="n">threshold_dict</span>
<span class="p">)</span>
</pre></div>
</div>
<p>From the sub-package <strong>visiannot</strong> we import the class <a class="reference internal" href="APIreference/visiannot/ViSiAnnoT/index.html#visiannot.visiannot.ViSiAnnoT.ViSiAnnoT" title="visiannot.visiannot.ViSiAnnoT.ViSiAnnoT"><code class="xref py py-class docutils literal notranslate"><span class="pre">ViSiAnnoT</span></code></a>. We have a set of 3 synchronized signals (ECG, QRS beat detection and RR series), located in the folder <em>data</em>. The QRS beat detection and RR series are stored in the same mat file, it is specified in <code class="docutils literal notranslate"><span class="pre">signal_dict</span></code> what is their respective key to access them (<code class="docutils literal notranslate"><span class="pre">&quot;tqrs&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;rr&quot;</span></code>). Both of those signals are non regularly sampled, so it is compulsory to set a regularly sampled signal on top (here <code class="docutils literal notranslate"><span class="pre">&quot;ecg&quot;</span></code>).</p>
<p>The threshold configuration dictionary <code class="docutils literal notranslate"><span class="pre">threshold_dict</span></code> specifies on which signal widget to draw the threshold (keys of the dictionary), the threshold value and its color (values of the dictionary). In this example, two thresholds are defined on the <code class="docutils literal notranslate"><span class="pre">&quot;RR&quot;</span></code> plot. <a class="reference internal" href="#fig-example-threshold"><span class="std std-numref">Fig. 6</span></a> shows this particular plot.</p>
<div class="figure align-default" id="id5">
<span id="fig-example-threshold"></span><img alt="_images/example_thresholds.png" src="_images/example_thresholds.png" />
<p class="caption"><span class="caption-number">Fig. 6 </span><span class="caption-text">Detail of a screenshot of ViSiAnnoT used as a signal viewer with two thresholds</span><a class="headerlink" href="#id5" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="temporal-intervals">
<span id="intervals"></span><h3>Temporal intervals<a class="headerlink" href="#temporal-intervals" title="Permalink to this headline">¶</a></h3>
<p>It is also possible to display temporal intervals on the signal plots. This may be useful if the user has pre-annotations or results from a detection algorithm and wants to visually check their accuracy.</p>
<p>Here is an example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">visiannot.visiannot</span> <span class="k">import</span> <span class="n">ViSiAnnoT</span>

<span class="c1"># signal paths</span>
<span class="n">path_ecg</span> <span class="o">=</span> <span class="s2">&quot;data/20170423T002840_ecg.txt&quot;</span>
<span class="n">path_tqrs</span> <span class="o">=</span> <span class="s2">&quot;data/20170423T002840_tqrs.mat&quot;</span>
<span class="n">path_interval</span> <span class="o">=</span> <span class="s2">&quot;data/20170423T002840_interval.txt&quot;</span>
<span class="n">path_intervalbis</span> <span class="o">=</span> <span class="s2">&quot;data/20170423T002840_intervalbis.txt&quot;</span>

<span class="c1"># define plot style</span>
<span class="n">plot_style_tqrs</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;pen&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s1">&#39;symbol&#39;</span><span class="p">:</span> <span class="s1">&#39;+&#39;</span><span class="p">,</span>
        <span class="s1">&#39;symbolPen&#39;</span><span class="p">:</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span>
        <span class="s1">&#39;symbolSize&#39;</span><span class="p">:</span> <span class="mi">10</span>
<span class="p">}</span>

<span class="c1"># signal configuration</span>
<span class="n">signal_dict</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">signal_dict</span><span class="p">[</span><span class="s2">&quot;ECG&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">[</span><span class="n">path_ecg</span><span class="p">,</span> <span class="s2">&quot;ecg&quot;</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;%Y%m</span><span class="si">%d</span><span class="s2">T%H%M%S&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">],</span>
        <span class="p">[</span><span class="n">path_tqrs</span><span class="p">,</span> <span class="s2">&quot;tqrs&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;%Y%m</span><span class="si">%d</span><span class="s2">T%H%M%S&quot;</span><span class="p">,</span> <span class="n">plot_style_tqrs</span><span class="p">]</span>
<span class="p">]</span>

<span class="c1"># interval configuration</span>
<span class="n">interval_dict</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">interval_dict</span><span class="p">[</span><span class="s2">&quot;ECG&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">[</span><span class="n">path_interval</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;%Y%m</span><span class="si">%d</span><span class="s2">T%H%M%S&quot;</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">50</span><span class="p">)],</span>
        <span class="p">[</span><span class="n">path_intervalbis</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;%Y%m</span><span class="si">%d</span><span class="s2">T%H%M%S&quot;</span><span class="p">,</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">50</span><span class="p">)]</span>
<span class="p">]</span>

<span class="c1"># create ViSiAnnoT window</span>
<span class="n">win_visiannot</span> <span class="o">=</span> <span class="n">ViSiAnnoT</span><span class="p">(</span>
        <span class="p">{},</span> <span class="n">signal_dict</span><span class="p">,</span> <span class="n">flag_pause_status</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">layout_mode</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
        <span class="n">interval_dict</span><span class="o">=</span><span class="n">interval_dict</span>
<span class="p">)</span>
</pre></div>
</div>
<p>From the sub-package <strong>visiannot</strong> we import the class <a class="reference internal" href="APIreference/visiannot/ViSiAnnoT/index.html#visiannot.visiannot.ViSiAnnoT.ViSiAnnoT" title="visiannot.visiannot.ViSiAnnoT.ViSiAnnoT"><code class="xref py py-class docutils literal notranslate"><span class="pre">ViSiAnnoT</span></code></a>. We have a set of 2 synchronized signals (ECG and QRS beat detection) and 2 synchronized intervals, located in the folder <em>data</em>. The intervals may be stored in two ways in the files:</p>
<ul class="simple">
<li><p>As a vector of length <img class="math" src="_images/math/dc9ec83f430cb60bdb71e29cf6de5edefc3f8346.png" alt="n_{sample}"/> with 0 and 1, where <img class="math" src="_images/math/8be47b02891fe663dcb0f39dcb155d73a6c7b751.png" alt="n_{sample} \in \mathbb{N}"/> is the number of samples in the file,</p></li>
<li><p>As a matrix of shape <img class="math" src="_images/math/d0897f660a31dbb299d71a1648045dcb37de760a.png" alt="(n_{inter},2)"/>, where <img class="math" src="_images/math/bf5d4d24ae1fbbf06c8617a298f600ee73debd77.png" alt="n_{inter} \in \mathbb{N}"/> is the number of intervals in the file, each line is an interval with the starting sample and the ending sample.</p></li>
</ul>
<p>The configuration dictionary <code class="docutils literal notranslate"><span class="pre">interval_dict</span></code> specifies to <a class="reference internal" href="APIreference/visiannot/ViSiAnnoT/index.html#visiannot.visiannot.ViSiAnnoT.ViSiAnnoT" title="visiannot.visiannot.ViSiAnnoT.ViSiAnnoT"><code class="xref py py-class docutils literal notranslate"><span class="pre">ViSiAnnoT</span></code></a> where to find the interval file, what is the frequency of the interval, how to get the beginning datetime of the interval file and how to plot. Each item corresponds to one signal widget. The key is the widget ID (same as in <code class="docutils literal notranslate"><span class="pre">signal_dict</span></code>). The value is a nested configuration list where each element corresponds to one type of interval and is a list of 7 elements:</p>
<ul class="simple">
<li><p>Path to the interval file,</p></li>
<li><p>Key to access the data in the file (in case of .h5 or .mat, set it to <code class="docutils literal notranslate"><span class="pre">''</span></code> otherwise),</p></li>
<li><p>Interval frequency (may also be a string with path to the frequency attribute in case of h5 file),</p></li>
<li><p>Delimiter to get the beginning datetime in the interval file name,</p></li>
<li><p>Position of the beginning datetime in the interval file name, according to the delimiter,</p></li>
<li><p>Format of the beginning datetime in the interval file name (<code class="docutils literal notranslate"><span class="pre">&quot;posix&quot;</span></code> or format compliant with <code class="docutils literal notranslate"><span class="pre">datetime</span></code>, see <a class="reference external" href="https://docs.python.org/3/library/datetime.html#strftime-and-strptime-format-codes">https://docs.python.org/3/library/datetime.html#strftime-and-strptime-format-codes</a>),</p></li>
<li><p>RGB color.</p></li>
</ul>
<p>In this example, two types of intervals are defined on the <code class="docutils literal notranslate"><span class="pre">&quot;ECG&quot;</span></code> plot. A specific color is assigned to each type of temporal intervals. <a class="reference internal" href="#fig-example-intervals"><span class="std std-numref">Fig. 7</span></a> shows this particular plot.</p>
<div class="figure align-default" id="id6">
<span id="fig-example-intervals"></span><img alt="_images/example_intervals.png" src="_images/example_intervals.png" />
<p class="caption"><span class="caption-number">Fig. 7 </span><span class="caption-text">Detail of a screenshot of ViSiAnnoT used as a signal viewer with additional temporal intervals</span><a class="headerlink" href="#id6" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>
<div class="section" id="combined-video-and-signal-visualization">
<h2>Combined video and signal visualization<a class="headerlink" href="#combined-video-and-signal-visualization" title="Permalink to this headline">¶</a></h2>
<p><strong>ViSiAnnoT</strong> allows to combine video and signal visualization. The videos and the signals must be synchronized. If they do not share the same frequency, it is automatically taken into account.</p>
<p>Here is an example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">visiannot.VISIANNOT</span> <span class="k">import</span> <span class="n">ViSiAnnoT</span>

<span class="c1"># video paths</span>
<span class="n">path_video_1</span> <span class="o">=</span> <span class="s2">&quot;data/2017-12-19T11-33-46_color.mp4&quot;</span>
<span class="n">path_video_2</span> <span class="o">=</span> <span class="s2">&quot;data/2017-12-19T11-33-46_BW1.mp4&quot;</span>
<span class="n">path_video_3</span> <span class="o">=</span> <span class="s2">&quot;data/2017-12-19T11-33-46_BW2.mp4&quot;</span>

<span class="c1"># video configuration</span>
<span class="n">video_dict</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">video_dict</span><span class="p">[</span><span class="s2">&quot;color&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">path_video_1</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">T%H-%M-%S&quot;</span><span class="p">)</span>
<span class="n">video_dict</span><span class="p">[</span><span class="s2">&quot;BW1&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">path_video_2</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">T%H-%M-%S&quot;</span><span class="p">)</span>
<span class="n">video_dict</span><span class="p">[</span><span class="s2">&quot;BW2&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">path_video_3</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">T%H-%M-%S&quot;</span><span class="p">)</span>

<span class="c1"># signal paths</span>
<span class="n">path_ecg</span> <span class="o">=</span> <span class="s2">&quot;data/20170423T002840_ecg.txt&quot;</span>
<span class="n">path_tqrs</span> <span class="o">=</span> <span class="s2">&quot;data/20170423T002840_tqrs.mat&quot;</span>

<span class="c1"># define plot style</span>
<span class="n">plot_style_tqrs</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;pen&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="s1">&#39;symbol&#39;</span><span class="p">:</span> <span class="s1">&#39;+&#39;</span><span class="p">,</span>
    <span class="s1">&#39;symbolPen&#39;</span><span class="p">:</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span>
    <span class="s1">&#39;symbolSize&#39;</span><span class="p">:</span> <span class="mi">10</span>
<span class="p">}</span>

<span class="c1"># signal configuration</span>
<span class="n">signal_dict</span> <span class="o">=</span> <span class="p">{}</span>

<span class="n">signal_dict</span><span class="p">[</span><span class="s2">&quot;ECG&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">[</span><span class="n">path_ecg</span><span class="p">,</span> <span class="s2">&quot;ecg&quot;</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;%Y%m</span><span class="si">%d</span><span class="s2">T%H%M%S&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">],</span>
    <span class="p">[</span><span class="n">path_tqrs</span><span class="p">,</span> <span class="s2">&quot;tqrs&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;%Y%m</span><span class="si">%d</span><span class="s2">T%H%M%S&quot;</span><span class="p">,</span> <span class="n">plot_style_tqrs</span><span class="p">]</span>
<span class="p">]</span>

<span class="c1"># create ViSiAnnoT window</span>
<span class="n">win_visiannot</span> <span class="o">=</span> <span class="n">ViSiAnnoT</span><span class="p">(</span><span class="n">video_dict</span><span class="p">,</span> <span class="n">signal_dict</span><span class="p">)</span>
</pre></div>
</div>
<p><a class="reference internal" href="#fig-example-combined"><span class="std std-numref">Fig. 8</span></a> shows the resulting window. The temporal cursor is linked to the current video frame that is displayed. The user can navigate by clicking on a signal plot in order to change the position of the temporal cursor, then the video is displayed at the same position, as well as the navigation point in the progress bar. It is also possible to navigate by dragging the navigation point in the progress bar.</p>
<div class="figure align-default" id="id7">
<span id="fig-example-combined"></span><img alt="_images/example_combined.png" src="_images/example_combined.png" />
<p class="caption"><span class="caption-number">Fig. 8 </span><span class="caption-text">Screenshot of ViSiAnnoT used as a combined video and signal visualizer</span><a class="headerlink" href="#id7" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="tools-for-fast-navigation">
<span id="sec-fast-nav"></span><h2>Tools for fast navigation<a class="headerlink" href="#tools-for-fast-navigation" title="Permalink to this headline">¶</a></h2>
<p>First, the user can set a truncation duration in order to split by default the display of the signals in several parts. For example, if the signal files last 30 minutes and the user chooses a 10 minutes truncation duration, then there is a combo box which allows to switch from a 10 minutes part to another (0 to 10 minutes , 10 to 20 minutes, 20 to 30 minutes). This feature is set by the keyword argument <code class="docutils literal notranslate"><span class="pre">trunc_duration</span></code> in <a class="reference internal" href="APIreference/visiannot/ViSiAnnoT/index.html#visiannot.visiannot.ViSiAnnoT.ViSiAnnoT" title="visiannot.visiannot.ViSiAnnoT.ViSiAnnoT"><code class="xref py py-class docutils literal notranslate"><span class="pre">ViSiAnnoT</span></code></a> constructor. In the given example: <code class="docutils literal notranslate"><span class="pre">trunc_duration=(10,</span> <span class="pre">0)</span></code> (tuple with minutes and seconds of the truncation duration).</p>
<p>Second, there is a combo box to select a temporal range duration in order to display a new temporal range that will begin at the current position of the temporal cursor. The list of available temporal range durations must be configured by the user with the keyword argument <code class="docutils literal notranslate"><span class="pre">from_cursor_list</span></code> in <a class="reference internal" href="APIreference/visiannot/ViSiAnnoT/index.html#visiannot.visiannot.ViSiAnnoT.ViSiAnnoT" title="visiannot.visiannot.ViSiAnnoT.ViSiAnnoT"><code class="xref py py-class docutils literal notranslate"><span class="pre">ViSiAnnoT</span></code></a> constructor. For example, to have the choice between 30 seconds, 1 minute and 1 minute 30 seconds: <code class="docutils literal notranslate"><span class="pre">from_cursor_list=[(0,</span> <span class="pre">30),</span> <span class="pre">(1,</span> <span class="pre">0),</span> <span class="pre">(1,</span> <span class="pre">30)]</span></code>.</p>
<p>Third, there is a tool for defining a custom temporal range, as shown in <a class="reference internal" href="#fig-example-custom-interval"><span class="std std-numref">Fig. 9</span></a>. The user must define the start datetime of the temporal range. The push button “Current” can be used to define it as the current position of the temporal cursor. Then, the user must define the temporal range duration.</p>
<div class="figure align-default" id="id8">
<span id="fig-example-custom-interval"></span><img alt="_images/custom_interval.png" src="_images/custom_interval.png" />
<p class="caption"><span class="caption-number">Fig. 9 </span><span class="caption-text">Tool for defining a custom temporal range</span><a class="headerlink" href="#id8" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="management-of-long-recording">
<span id="sec-longrec"></span><h2>Management of long recording<a class="headerlink" href="#management-of-long-recording" title="Permalink to this headline">¶</a></h2>
<p>This section introduces the features for managing long recordings. All features introduced above are still available for long recordings. The class <a class="reference internal" href="APIreference/visiannot/ViSiAnnoTLongRec/index.html#visiannot.visiannot.ViSiAnnoTLongRec.ViSiAnnoTLongRec" title="visiannot.visiannot.ViSiAnnoTLongRec.ViSiAnnoTLongRec"><code class="xref py py-class docutils literal notranslate"><span class="pre">ViSiAnnoTLongRec</span></code></a> inherits from <a class="reference internal" href="APIreference/visiannot/ViSiAnnoT/index.html#visiannot.visiannot.ViSiAnnoT.ViSiAnnoT" title="visiannot.visiannot.ViSiAnnoT.ViSiAnnoT"><code class="xref py py-class docutils literal notranslate"><span class="pre">ViSiAnnoT</span></code></a> and adds specific features to manage long recordings.</p>
<p>A long recording is defined as a set of consecutive video and/or signal files. For example, a long recording lasting for two hours might be composed of four 30-minute length video files and eight 15-minute length signal files.</p>
<p>In this context, there are two additional buttons that allow to switch easily from one file to another and a combo box to directly select a specific file in the recording (with respect to the video files, or the first signal if no video). <a class="reference internal" href="#fig-file-selection"><span class="std std-numref">Fig. 10</span></a> shows these buttons and the combo box.</p>
<div class="figure align-default" id="id9">
<span id="fig-file-selection"></span><img alt="_images/file_selection.png" src="_images/file_selection.png" />
<p class="caption"><span class="caption-number">Fig. 10 </span><span class="caption-text">Buttons and combo box for file selection in a long recording</span><a class="headerlink" href="#id9" title="Permalink to this image">¶</a></p>
</div>
<div class="section" id="set-of-synchronized-files">
<h3>Set of synchronized files<a class="headerlink" href="#set-of-synchronized-files" title="Permalink to this headline">¶</a></h3>
<p>In this case, the different modalities are synchronized. In the constructor of <a class="reference internal" href="APIreference/visiannot/ViSiAnnoTLongRec/index.html#visiannot.visiannot.ViSiAnnoTLongRec.ViSiAnnoTLongRec" title="visiannot.visiannot.ViSiAnnoTLongRec.ViSiAnnoTLongRec"><code class="xref py py-class docutils literal notranslate"><span class="pre">ViSiAnnoTLongRec</span></code></a>, the keyword argument <code class="docutils literal notranslate"><span class="pre">flag_synchro</span></code> is set to <code class="docutils literal notranslate"><span class="pre">True</span></code> (default value).</p>
<p>For example, let us consider a recording which begins at 00h00min0s on the 2018/01/01 and lasts 90 minutes with video and ECG signal. For each modality, the recording is split in 3 files of 30 minutes. The name of the files would be similar to the following:</p>
<ul class="simple">
<li><p>video_2018-01-01T00-00-00.avi, ECG_2018-01-01T00-00-00.h5</p></li>
<li><p>video_2018-01-01T00-30-00.avi, ECG_2018-01-01T00-30-00.h5</p></li>
<li><p>video_2018-01-01T01-00-00.avi, ECG_2018-01-01T01-00-00.h5</p></li>
</ul>
<p>At launch, <strong>ViSiAnnoT</strong> loads and display the files “video_2018-01-01T00-00-00.avi” and “ECG_2018-01-01T00-00-00.h5”. When clicking on the “next file” button, the files “video_2018-01-01T00-30-00.avi” and “ECG_2018-01-01T00-30-00.h5” are loaded.</p>
</div>
<div class="section" id="set-of-asynchronous-files">
<h3>Set of asynchronous files<a class="headerlink" href="#set-of-asynchronous-files" title="Permalink to this headline">¶</a></h3>
<p>In the case where the different modalities are not synchronized with each other, <a class="reference internal" href="APIreference/visiannot/ViSiAnnoTLongRec/index.html#visiannot.visiannot.ViSiAnnoTLongRec.ViSiAnnoTLongRec" title="visiannot.visiannot.ViSiAnnoTLongRec.ViSiAnnoTLongRec"><code class="xref py py-class docutils literal notranslate"><span class="pre">ViSiAnnoTLongRec</span></code></a> automatically synchronize them before display. The keyword argument <code class="docutils literal notranslate"><span class="pre">flag_synchro</span></code> of the constructor must be set to <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
<p>We assume that the beginning datetime of each file is contained in its name.</p>
<p>The reference modality for synchronization is the video if there is any, otherwise it is the first signal to plot. Then, when loading a file of the reference modality, <strong>ViSiAnnoT</strong> loads the parts of the other signals that are covered by the reference file.</p>
<p>Here is an example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">visiannot.visiannot</span> <span class="k">import</span> <span class="n">ViSiAnnoTLongRec</span>

<span class="c1"># video directory</span>
<span class="n">dir_video</span> <span class="o">=</span> <span class="s2">&quot;data&quot;</span>

<span class="c1"># video configuration</span>
<span class="n">video_dict</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">video_dict</span><span class="p">[</span><span class="s2">&quot;BW1&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">dir_video</span><span class="p">,</span> <span class="s2">&quot;*BW1*.mp4&quot;</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">T%H-%M-%S&quot;</span><span class="p">]</span>
<span class="n">video_dict</span><span class="p">[</span><span class="s2">&quot;BW2&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">dir_video</span><span class="p">,</span> <span class="s2">&quot;*BW2*.mp4&quot;</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">T%H-%M-%S&quot;</span><span class="p">]</span>

<span class="c1"># signal directory</span>
<span class="n">dir_sig</span> <span class="o">=</span> <span class="s2">&quot;data&quot;</span>

<span class="c1"># signal configuration</span>
<span class="n">signal_dict</span> <span class="o">=</span> <span class="p">{}</span>

<span class="n">signal_dict</span><span class="p">[</span><span class="s2">&quot;ECG&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">[</span>
        <span class="n">dir_sig</span><span class="p">,</span> <span class="s2">&quot;SynapseRPi/ecg/value&quot;</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="s2">&quot;data_15*.h5&quot;</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;posix&quot;</span><span class="p">,</span>
        <span class="kc">None</span>
    <span class="p">]</span>
<span class="p">]</span>

<span class="n">signal_dict</span><span class="p">[</span><span class="s2">&quot;Respiration&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">[</span>
        <span class="n">dir_sig</span><span class="p">,</span> <span class="s2">&quot;SynapseRPi/resp/value&quot;</span><span class="p">,</span> <span class="mf">62.5</span><span class="p">,</span> <span class="s2">&quot;data_15*.h5&quot;</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;posix&quot;</span><span class="p">,</span>
        <span class="p">{</span><span class="s1">&#39;pen&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="s1">&#39;m&#39;</span><span class="p">,</span> <span class="s1">&#39;width&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}}</span>
    <span class="p">]</span>
<span class="p">]</span>

<span class="c1"># create ViSiAnnoT window</span>
<span class="n">win_visiannot</span> <span class="o">=</span> <span class="n">ViSiAnnoTLongRec</span><span class="p">(</span>
    <span class="n">video_dict</span><span class="p">,</span> <span class="n">signal_dict</span><span class="p">,</span>
    <span class="n">flag_pause_status</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">flag_synchro</span><span class="o">=</span><span class="kc">False</span>
<span class="p">)</span>
</pre></div>
</div>
<p>From the sub-package <strong>visiannot</strong> we import the class <a class="reference internal" href="APIreference/visiannot/ViSiAnnoTLongRec/index.html#visiannot.visiannot.ViSiAnnoTLongRec.ViSiAnnoTLongRec" title="visiannot.visiannot.ViSiAnnoTLongRec.ViSiAnnoTLongRec"><code class="xref py py-class docutils literal notranslate"><span class="pre">ViSiAnnoTLongRec</span></code></a>. For a set of asynchronous files, the keyword argument <code class="docutils literal notranslate"><span class="pre">flag_synchro</span></code> is set to <code class="docutils literal notranslate"><span class="pre">False</span></code> whereas for a set of synchronized files it is set to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<p>We define the video configuration and the signal configuration almost the same way as for the class <a class="reference internal" href="APIreference/visiannot/ViSiAnnoT/index.html#visiannot.visiannot.ViSiAnnoT.ViSiAnnoT" title="visiannot.visiannot.ViSiAnnoT.ViSiAnnoT"><code class="xref py py-class docutils literal notranslate"><span class="pre">ViSiAnnoT</span></code></a>, but instead of specifying the path to a file, we specify the directory containing the files and a pattern to find them.</p>
<p>Regarding <code class="docutils literal notranslate"><span class="pre">video_dict</span></code>, each item corresponds to one camera. The key is the camera ID and the value is a list of 5 elements:</p>
<ul class="simple">
<li><p>Directory where to find the video files,</p></li>
<li><p>Pattern to find the video files,</p></li>
<li><p>Delimiter to get the beginning datetime in the video file name,</p></li>
<li><p>Position of the beginning datetime in the video file name, according to the delimiter,</p></li>
<li><p>Format of the beginning datetime in the video file name (<code class="docutils literal notranslate"><span class="pre">&quot;posix&quot;</span></code> or format compliant with <code class="docutils literal notranslate"><span class="pre">datetime</span></code>, see <a class="reference external" href="https://docs.python.org/3/library/datetime.html#strftime-and-strptime-format-codes">https://docs.python.org/3/library/datetime.html#strftime-and-strptime-format-codes</a>).</p></li>
</ul>
<p>Regarding <code class="docutils literal notranslate"><span class="pre">signal_dict</span></code>, each item corresponds to one signal widget. The key is the widget ID. The value is a nested configuration list where each element corresponds to one signal to plot and is a list of 8 elements:</p>
<ul class="simple">
<li><p>Directory where to find the signal files,</p></li>
<li><p>Key to access the data in the file (in case of .h5 or .mat, set it to <code class="docutils literal notranslate"><span class="pre">''</span></code> otherwise), also used a legend,</p></li>
<li><p>Signal frequency (may also be a string with path to the frequency attribute in case of h5 file), set it to <code class="docutils literal notranslate"><span class="pre">0</span></code> in case of non-regularly sampled signal,</p></li>
<li><p>Pattern to find the signal files,</p></li>
<li><p>Delimiter to get the beginning datetime in the signal file name,</p></li>
<li><p>Position of the beginning datetime in the signal file name, according to the delimiter,</p></li>
<li><p>Format of the beginning datetime in the signal file name (<code class="docutils literal notranslate"><span class="pre">&quot;posix&quot;</span></code> or format compliant with <code class="docutils literal notranslate"><span class="pre">datetime</span></code>, see <a class="reference external" href="https://docs.python.org/3/library/datetime.html#strftime-and-strptime-format-codes">https://docs.python.org/3/library/datetime.html#strftime-and-strptime-format-codes</a>),</p></li>
<li><p>Dictionary with plot style.</p></li>
</ul>
</div>
</div>
<div class="section" id="multi-label-annotation-tools">
<h2>Multi-label annotation tools<a class="headerlink" href="#multi-label-annotation-tools" title="Permalink to this headline">¶</a></h2>
<p><strong>ViSiAnnoT</strong> provides two annotation tools:</p>
<ul class="simple">
<li><p>Temporal events annotation,</p></li>
<li><p>Image extraction.</p></li>
</ul>
<div class="section" id="events-annotation-tool">
<span id="eventsannot"></span><h3>Events annotation tool<a class="headerlink" href="#events-annotation-tool" title="Permalink to this headline">¶</a></h3>
<p>This tool allows to annotate temporal intervals. The user can provide as much labels as desired. This tool is useful for establishing the ground truth of a temporal segmentation or classification, as well as studying the occurrence and duration of specific events. It automatically creates a file for each label, where the annotations are written.</p>
<p>When creating an instance of <a class="reference internal" href="APIreference/visiannot/ViSiAnnoT/index.html#visiannot.visiannot.ViSiAnnoT.ViSiAnnoT" title="visiannot.visiannot.ViSiAnnoT.ViSiAnnoT"><code class="xref py py-class docutils literal notranslate"><span class="pre">ViSiAnnoT</span></code></a> or <a class="reference internal" href="APIreference/visiannot/ViSiAnnoTLongRec/index.html#visiannot.visiannot.ViSiAnnoTLongRec.ViSiAnnoTLongRec" title="visiannot.visiannot.ViSiAnnoTLongRec.ViSiAnnoTLongRec"><code class="xref py py-class docutils literal notranslate"><span class="pre">ViSiAnnoTLongRec</span></code></a>, the configuration dictionary of the annotation tool is given to the keyword argument <code class="docutils literal notranslate"><span class="pre">annotevent_dict</span></code> of the constructor. Here is an example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">annotevent_dict</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">annotevent_dict</span><span class="p">[</span><span class="s2">&quot;Label-1&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">200</span><span class="p">,</span> <span class="mi">105</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">50</span><span class="p">]</span>
<span class="n">annotevent_dict</span><span class="p">[</span><span class="s2">&quot;Label-2&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">105</span><span class="p">,</span> <span class="mi">205</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">50</span><span class="p">]</span>
</pre></div>
</div>
<p>There are two labels (dictionary keys), to which is associated a color (dictionary values). It is worth to note that the label <code class="docutils literal notranslate"><span class="pre">&quot;DURATION&quot;</span></code> is not permitted because it is used internally by <a class="reference internal" href="APIreference/visiannot/ViSiAnnoT/index.html#visiannot.visiannot.ViSiAnnoT.ViSiAnnoT" title="visiannot.visiannot.ViSiAnnoT.ViSiAnnoT"><code class="xref py py-class docutils literal notranslate"><span class="pre">ViSiAnnoT</span></code></a>.</p>
<p><a class="reference internal" href="#fig-annot-event"><span class="std std-numref">Fig. 11</span></a> shows a screenshot of the events annotation tool.</p>
<div class="figure align-default" id="id10">
<span id="fig-annot-event"></span><img alt="_images/annotation_event_tool.png" src="_images/annotation_event_tool.png" />
<p class="caption"><span class="caption-number">Fig. 11 </span><span class="caption-text">Events annotation tool</span><a class="headerlink" href="#id10" title="Permalink to this image">¶</a></p>
</div>
<p>The radio buttons on the top allow to select the current label. The push buttons “Start” and “Stop” respectively set the beginning and ending datetime of the annotated temporal interval. In this example, the ending datetime is not defined yet. The push button “Add” validates the annotation and appends it in a file. The number of annotations is displayed next to it. The push button “Delete last” deletes the last added annotation. The push button “Display” enables or disables the display of the annotations on the signals plots.</p>
<p>The “Display mode” radio buttons allow to choose what to display:</p>
<ul class="simple">
<li><p>“Current label”: only the annotations of the current label is displayed (current label is the one selected in the “Current label selection” box),</p></li>
<li><p>“All labels”: the annotations of all labels are displayed,</p></li>
<li><p>“Custom (below)”: the user can choose the labels to display thanks to the check boxes below.</p></li>
</ul>
<p><a class="reference internal" href="#fig-example-annotation"><span class="std std-numref">Fig. 12</span></a> shows a screenshot of two signal plots with annotations displayed. They are displayed similarly to the additional temporal intervals. Each color corresponds to one label. As it can be seen on the progress bar, the temporal range is the first 5 minutes. The annotations outside of the temporal range are still displayed on the progress bar.</p>
<div class="figure align-default" id="id11">
<span id="fig-example-annotation"></span><img alt="_images/example_annotation.png" src="_images/example_annotation.png" />
<p class="caption"><span class="caption-number">Fig. 12 </span><span class="caption-text">Detail of a screenshot of ViSiAnnoT with annotations displayed, each color corresponding to one label</span><a class="headerlink" href="#id11" title="Permalink to this image">¶</a></p>
</div>
<p>It is possible to display the duration of the annotated intervals by clicking with the left button of the mouse while pressing the alt key. The label of the annotated interval must be the current label in order to get the display. An example is given in <a class="reference internal" href="#fig-annot-event-desc"><span class="std std-numref">Fig. 13</span></a>.</p>
<div class="figure align-default" id="id12">
<span id="fig-annot-event-desc"></span><img alt="_images/annotation_event_description.png" src="_images/annotation_event_description.png" />
<p class="caption"><span class="caption-number">Fig. 13 </span><span class="caption-text">Detail of a screenshot of ViSiAnnoT with annotations displayed, two of them with duration displayed</span><a class="headerlink" href="#id12" title="Permalink to this image">¶</a></p>
</div>
<div class="section" id="storage-of-events-annotation-files">
<h4>Storage of events annotation files<a class="headerlink" href="#storage-of-events-annotation-files" title="Permalink to this headline">¶</a></h4>
<p>In the constructor of <a class="reference internal" href="APIreference/visiannot/ViSiAnnoT/index.html#visiannot.visiannot.ViSiAnnoT.ViSiAnnoT" title="visiannot.visiannot.ViSiAnnoT.ViSiAnnoT"><code class="xref py py-class docutils literal notranslate"><span class="pre">ViSiAnnoT</span></code></a>, the keyword argument <code class="docutils literal notranslate"><span class="pre">annot_dir_base</span></code> specifies the base directory where to store annotation files. By default it is the directory <code class="docutils literal notranslate"><span class="pre">&quot;Annotations&quot;</span></code>, located at the current working directory from where <strong>ViSiAnnoT</strong> is launched. Then, a sub-directory is created specifically for the video/signal file, or long recording, that is annotated.</p>
<p>Below is described how the sub-directory is named depending on the context in which <strong>ViSiAnnoT</strong> is launched.</p>
<p><strong>Single video file</strong></p>
<p><strong>ViSiAnnoT</strong> is launched with the class <a class="reference internal" href="APIreference/visiannot/ViSiAnnoT/index.html#visiannot.visiannot.ViSiAnnoT.ViSiAnnoT" title="visiannot.visiannot.ViSiAnnoT.ViSiAnnoT"><code class="xref py py-class docutils literal notranslate"><span class="pre">ViSiAnnoT</span></code></a> and there is only a set of synchronized videos to visualize. The sub-directory is <code class="docutils literal notranslate"><span class="pre">&quot;%s_annotations&quot;</span></code> where <code class="docutils literal notranslate"><span class="pre">%s</span></code> is the basename of the file of the first camera in <code class="docutils literal notranslate"><span class="pre">video_dict</span></code>.</p>
<p>If we come back to the example of <a class="reference internal" href="#video"><span class="std std-ref">Video visualization with multiple cameras</span></a>, the annotations would be stored in the directory <code class="docutils literal notranslate"><span class="pre">&quot;Annotations/2017-12-19T11-33-46_color_annotations&quot;</span></code>.</p>
<p><strong>Single signal file</strong></p>
<p><strong>ViSiAnnoT</strong> is launched with the class <a class="reference internal" href="APIreference/visiannot/ViSiAnnoT/index.html#visiannot.visiannot.ViSiAnnoT.ViSiAnnoT" title="visiannot.visiannot.ViSiAnnoT.ViSiAnnoT"><code class="xref py py-class docutils literal notranslate"><span class="pre">ViSiAnnoT</span></code></a> and there is only a set of synchronized signals to visualize. The sub-directory is <code class="docutils literal notranslate"><span class="pre">&quot;%s_annotations&quot;</span></code> where <code class="docutils literal notranslate"><span class="pre">%s</span></code> is the basename of the file of the first signal in <code class="docutils literal notranslate"><span class="pre">signal_dict</span></code>.</p>
<p>If we come back to the example of <a class="reference internal" href="#signal-ex"><span class="std std-ref">Multiple signals on the same plot</span></a>, the annotations would be stored in the directory <code class="docutils literal notranslate"><span class="pre">&quot;Annotations/20170423T002840_ecg_annotations&quot;</span></code>.</p>
<p><strong>Long recording with video files</strong></p>
<p><strong>ViSiAnnoT</strong> is launched with the class <a class="reference internal" href="APIreference/visiannot/ViSiAnnoTLongRec/index.html#visiannot.visiannot.ViSiAnnoTLongRec.ViSiAnnoTLongRec" title="visiannot.visiannot.ViSiAnnoTLongRec.ViSiAnnoTLongRec"><code class="xref py py-class docutils literal notranslate"><span class="pre">ViSiAnnoTLongRec</span></code></a> and there are videos to visualize. The sub-directory is <code class="docutils literal notranslate"><span class="pre">&quot;%s_annotations&quot;</span></code> where <code class="docutils literal notranslate"><span class="pre">%s</span></code> is the basename of the first file of the first camera in <code class="docutils literal notranslate"><span class="pre">video_dict</span></code>.</p>
<p>For example, there are two cameras and the long recording is composed of three files:</p>
<ul class="simple">
<li><p>cam1_2020-01-01T00-00-00.mp4 / cam2_2020-01-01T00-00-00.mp4</p></li>
<li><p>cam1_2020-01-01T00-15-00.mp4 / cam2_2020-01-01T00-15-00.mp4</p></li>
<li><p>cam1_2020-01-01T00-30-00.mp4 / cam2_2020-01-01T00-30-00.mp4</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">&quot;cam1&quot;</span></code> is the first camera in <code class="docutils literal notranslate"><span class="pre">video_dict</span></code>. The annotations would be stored in the directory <code class="docutils literal notranslate"><span class="pre">&quot;Annotations/cam1_2020-01-01T00-00-00_annotations&quot;</span></code>.</p>
<p>If there are also signals to visualize, whether it is synchronized with video or not, then the annotation directory remains the same.</p>
<p><strong>Long recording without video files</strong></p>
<p><strong>ViSiAnnoT</strong> is launched with the class <a class="reference internal" href="APIreference/visiannot/ViSiAnnoTLongRec/index.html#visiannot.visiannot.ViSiAnnoTLongRec.ViSiAnnoTLongRec" title="visiannot.visiannot.ViSiAnnoTLongRec.ViSiAnnoTLongRec"><code class="xref py py-class docutils literal notranslate"><span class="pre">ViSiAnnoTLongRec</span></code></a> and there are only signals to visualize. The sub-directory is <code class="docutils literal notranslate"><span class="pre">&quot;%s_annotations&quot;</span></code> where <code class="docutils literal notranslate"><span class="pre">%s</span></code> is the basename of the first file of the first signal in <code class="docutils literal notranslate"><span class="pre">video_dict</span></code>.</p>
<p>For example, there are two signals and the long recording is composed of three files:</p>
<ul class="simple">
<li><p>sig1_2020-01-01T00-00-00.txt / sig2_2020-01-01T00-00-00.h5</p></li>
<li><p>sig1_2020-01-01T00-15-00.mp4 / sig2_2020-01-01T00-15-00.h5</p></li>
<li><p>sig1_2020-01-01T00-30-00.mp4 / sig2_2020-01-01T00-30-00.h5</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">&quot;sig1&quot;</span></code> is the first signal in <code class="docutils literal notranslate"><span class="pre">signal_dict</span></code>. The annotations would be stored in the directory <code class="docutils literal notranslate"><span class="pre">&quot;Annotations/sig1_2020-01-01T00-00-00_annotations&quot;</span></code>.</p>
</div>
<div class="section" id="description-of-events-annotation-files">
<h4>Description of events annotation files<a class="headerlink" href="#description-of-events-annotation-files" title="Permalink to this headline">¶</a></h4>
<p>For each label, two text files are created with the intervals of the annotated events. They both have the same content but formatted in a different way: <code class="docutils literal notranslate"><span class="pre">datetime</span></code> and <code class="docutils literal notranslate"><span class="pre">frame</span></code>.</p>
<p>Each line in an annotation file corresponds to an annotated event: <code class="docutils literal notranslate"><span class="pre">TS1</span> <span class="pre">-</span> <span class="pre">TS2</span></code>, where <code class="docutils literal notranslate"><span class="pre">TS1</span></code> (resp. <code class="docutils literal notranslate"><span class="pre">TS2</span></code>) is the start (resp. stop) timestamp of the annotated event.</p>
<p>The timestamp is formatted as follows in the <code class="docutils literal notranslate"><span class="pre">datetime</span></code> file: <code class="docutils literal notranslate"><span class="pre">%Y-%m-%dT%H:%M:%S.%sss</span></code>, where <code class="docutils literal notranslate"><span class="pre">%Y</span></code> is the year in 4 digits, <code class="docutils literal notranslate"><span class="pre">%m</span></code> is the month in 2 digits, <code class="docutils literal notranslate"><span class="pre">%d</span></code> is the day in 2 digits, <code class="docutils literal notranslate"><span class="pre">%H</span></code> is the hour, <code class="docutils literal notranslate"><span class="pre">%M</span></code> is the minute, <code class="docutils literal notranslate"><span class="pre">%S</span></code> is the second and <code class="docutils literal notranslate"><span class="pre">%sss</span></code> is the millisecond.</p>
<p>The timestamp is formatted as follows in the <code class="docutils literal notranslate"><span class="pre">frame</span></code> format: <code class="docutils literal notranslate"><span class="pre">fileID_sampleID</span></code>, where <code class="docutils literal notranslate"><span class="pre">fileID</span></code> is the index of the reference file in the long recording (zero-indexed, always <code class="docutils literal notranslate"><span class="pre">0</span></code> if <strong>ViSiAnnoT</strong> not launched for a long recording) and <code class="docutils literal notranslate"><span class="pre">sampleID</span></code> is the sample index in the reference file. In case of long recording, the reference file corresponds is the file of the first camera if there is any video, otherwise it is the file of the first signal. The sample index is expressed with the video frequency if there is any video, otherwise the frequency of the first signal.</p>
<p>For a given label, the annotation files are located at <code class="docutils literal notranslate"><span class="pre">&quot;Annotations/%s_annotations/%s_label-datetime.txt&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;Annotations/%s_annotations/%s_label-frame.txt&quot;</span></code>, where <code class="docutils literal notranslate"><span class="pre">%s</span></code> is the name of the (first) file of the first modality (see above).</p>
</div>
</div>
<div class="section" id="image-extraction-tool">
<span id="image-extraction"></span><h3>Image extraction tool<a class="headerlink" href="#image-extraction-tool" title="Permalink to this headline">¶</a></h3>
<p>This tool allows to extract a still image from the video(s) and associate a label to it.</p>
<p>When creating an instance of <em>ViSiAnnoT</em> or <em>ViSiAnnoTLongRec</em>, the configuration of the annotation tool is given to the keyword argument <code class="docutils literal notranslate"><span class="pre">annotimage_list</span></code>. Here is an example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">annotimage_list</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Label-A&quot;</span><span class="p">,</span> <span class="s2">&quot;Label-B&quot;</span><span class="p">,</span> <span class="s2">&quot;Label-C&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p><a class="reference internal" href="#fig-annot-im"><span class="std std-numref">Fig. 14</span></a> shows a screenshot of the image extraction tool. The user selects the label thanks to the radio buttons. Then the push button “Save” allows to extract the current frame for each camera and saves it in a directory named after the selected label.</p>
<div class="figure align-default" id="id13">
<span id="fig-annot-im"></span><img alt="_images/annotation_image_tool.png" src="_images/annotation_image_tool.png" />
<p class="caption"><span class="caption-number">Fig. 14 </span><span class="caption-text">Image extraction tool</span><a class="headerlink" href="#id13" title="Permalink to this image">¶</a></p>
</div>
<p>The extracted images are stored in the same base directory than events annotation files. There is the base directory specified by the keyword argument <code class="docutils literal notranslate"><span class="pre">annot_base_dir</span></code> in <a class="reference internal" href="APIreference/visiannot/ViSiAnnoT/index.html#visiannot.visiannot.ViSiAnnoT.ViSiAnnoT" title="visiannot.visiannot.ViSiAnnoT.ViSiAnnoT"><code class="xref py py-class docutils literal notranslate"><span class="pre">ViSiAnnoT</span></code></a> constructor, by default <code class="docutils literal notranslate"><span class="pre">&quot;Annotations&quot;</span></code>. Then a sub-directory is created: <code class="docutils literal notranslate"><span class="pre">&quot;Annotations/%s_annotations&quot;</span></code>, where <code class="docutils literal notranslate"><span class="pre">%s</span></code> is the basename of the (first) file of the first modality (see above).</p>
<p>For each label, a sub-directory is created: <code class="docutils literal notranslate"><span class="pre">&quot;Annotations/%s_annotations/label&quot;</span></code>. In this sub-directory are stored the extracted images. The image file name is <code class="docutils literal notranslate"><span class="pre">&quot;%s_%d.png&quot;</span></code>, where <code class="docutils literal notranslate"><span class="pre">%s</span></code> is the video file name and <code class="docutils literal notranslate"><span class="pre">%d</span></code> is the frame index of the image.</p>
</div>
</div>
<div class="section" id="layout-modes">
<span id="sec-layout"></span><h2>Layout modes<a class="headerlink" href="#layout-modes" title="Permalink to this headline">¶</a></h2>
<p>In the context of combined video and signal visualization, the user may want to put the emphasis on either the video or the signal. For this purpose, we provide three default layout mode, to be selected with the keyword argument <code class="docutils literal notranslate"><span class="pre">layout_mode</span></code> (may be <code class="docutils literal notranslate"><span class="pre">1</span></code>, <code class="docutils literal notranslate"><span class="pre">2</span></code> or <code class="docutils literal notranslate"><span class="pre">3</span></code>) The user may also manually configure the layout of the window with the keyword argument <code class="docutils literal notranslate"><span class="pre">poswid_dict</span></code>.</p>
<p>Here is an example of combined video and signal visualization in the context of long recording:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">visiannot.visiannot</span> <span class="k">import</span> <span class="n">ViSiAnnoTLongRec</span>

<span class="c1"># video directory</span>
<span class="n">dir_video</span> <span class="o">=</span> <span class="s2">&quot;data&quot;</span>

<span class="c1"># video configuration</span>
<span class="n">video_dict</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">video_dict</span><span class="p">[</span><span class="s2">&quot;BW1&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">dir_video</span><span class="p">,</span> <span class="s2">&quot;*BW1*.mp4&quot;</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">T%H-%M-%S&quot;</span><span class="p">]</span>
<span class="n">video_dict</span><span class="p">[</span><span class="s2">&quot;BW2&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">dir_video</span><span class="p">,</span> <span class="s2">&quot;*BW2*.mp4&quot;</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">T%H-%M-%S&quot;</span><span class="p">]</span>

<span class="c1"># signal directory</span>
<span class="n">dir_sig</span> <span class="o">=</span> <span class="s2">&quot;data&quot;</span>

<span class="c1"># signal configuration</span>
<span class="n">signal_dict</span> <span class="o">=</span> <span class="p">{}</span>

<span class="n">signal_dict</span><span class="p">[</span><span class="s2">&quot;ECG&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">[</span>
        <span class="n">dir_sig</span><span class="p">,</span> <span class="s2">&quot;SynapseRPi/ecg/value&quot;</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="s2">&quot;data_15*.h5&quot;</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;posix&quot;</span><span class="p">,</span>
        <span class="kc">None</span>
    <span class="p">]</span>
<span class="p">]</span>

<span class="n">signal_dict</span><span class="p">[</span><span class="s2">&quot;Respiration&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">[</span>
        <span class="n">dir_sig</span><span class="p">,</span> <span class="s2">&quot;SynapseRPi/resp/value&quot;</span><span class="p">,</span> <span class="mf">62.5</span><span class="p">,</span> <span class="s2">&quot;data_15*.h5&quot;</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;posix&quot;</span><span class="p">,</span>
        <span class="p">{</span><span class="s1">&#39;pen&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="s1">&#39;m&#39;</span><span class="p">,</span> <span class="s1">&#39;width&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}}</span>
    <span class="p">]</span>
<span class="p">]</span>

<span class="c1"># event annotation dictionary</span>
<span class="n">annotevent_dict</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">annotevent_dict</span><span class="p">[</span><span class="s2">&quot;Label-1&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">200</span><span class="p">,</span> <span class="mi">105</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">50</span><span class="p">]</span>
<span class="n">annotevent_dict</span><span class="p">[</span><span class="s2">&quot;Label-2&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">105</span><span class="p">,</span> <span class="mi">205</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">50</span><span class="p">]</span>

<span class="c1"># image annotation dictionary</span>
<span class="n">annotimage_list</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Label-A&quot;</span><span class="p">,</span> <span class="s2">&quot;Label-B&quot;</span><span class="p">]</span>


<span class="c1"># create ViSiAnnoT window</span>
<span class="n">win_visiannot</span> <span class="o">=</span> <span class="n">ViSiAnnoTLongRec</span><span class="p">(</span>
    <span class="n">video_dict</span><span class="p">,</span> <span class="n">signal_dict</span><span class="p">,</span>
    <span class="n">annotevent_dict</span><span class="o">=</span><span class="n">annotevent_dict</span><span class="p">,</span>
    <span class="n">annotimage_list</span><span class="o">=</span><span class="n">annotimage_list</span><span class="p">,</span>
    <span class="n">flag_pause_status</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">trunc_duration</span><span class="o">=</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
    <span class="n">from_cursor_list</span><span class="o">=</span><span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">30</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">)],</span>
    <span class="n">flag_synchro</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">layout_mode</span><span class="o">=</span><span class="mi">1</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Mode 1 puts the emphasis on the video. If there is not enough space left for the signals, a scroll area is created.</p>
<div class="figure align-default" id="id14">
<img alt="_images/layout_mode_1.png" src="_images/layout_mode_1.png" />
<p class="caption"><span class="caption-number">Fig. 15 </span><span class="caption-text">Layout mode 1</span><a class="headerlink" href="#id14" title="Permalink to this image">¶</a></p>
</div>
<p>Mode 2 puts the emphasis on the signal.</p>
<div class="figure align-default" id="id15">
<img alt="_images/layout_mode_2.png" src="_images/layout_mode_2.png" />
<p class="caption"><span class="caption-number">Fig. 16 </span><span class="caption-text">Layout mode 2</span><a class="headerlink" href="#id15" title="Permalink to this image">¶</a></p>
</div>
<p>Mode 3 provides a more compact display since the following features are disabled: selection of truncated temporal range, selection of temporal range from cursor, and custom selection of temporal range.</p>
<div class="figure align-default" id="id16">
<img alt="_images/layout_mode_3.png" src="_images/layout_mode_3.png" />
<p class="caption"><span class="caption-number">Fig. 17 </span><span class="caption-text">Layout mode 3</span><a class="headerlink" href="#id16" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="keyboard-mouse-interactions">
<h2>Keyboard/mouse interactions<a class="headerlink" href="#keyboard-mouse-interactions" title="Permalink to this headline">¶</a></h2>
<p>Here is a synthesis of all the possible user interactions with the keyboard and the mouse.</p>
<div class="section" id="keyboard">
<h3>Keyboard<a class="headerlink" href="#keyboard" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p><strong>space</strong>: start/stop of the video playback</p></li>
<li><p><strong>left</strong>: 1 second backward</p>
<blockquote>
<div><ul class="simple">
<li><p>with <strong>control</strong> pressed: 1 minute backward</p></li>
</ul>
</div></blockquote>
</li>
<li><p><strong>right</strong>: 1 second forward</p>
<blockquote>
<div><ul class="simple">
<li><p>with <strong>control</strong> pressed: 1 minute forward</p></li>
</ul>
</div></blockquote>
</li>
<li><p><strong>down</strong>: 10 seconds backward</p>
<blockquote>
<div><ul class="simple">
<li><p>with <strong>control</strong> pressed: 10 minutes backward</p></li>
</ul>
</div></blockquote>
</li>
<li><p><strong>up</strong>: 10 seconds backward</p>
<blockquote>
<div><ul class="simple">
<li><p>with <strong>control</strong> pressed: 10 minutes backward</p></li>
</ul>
</div></blockquote>
</li>
<li><p><strong>l</strong>: 1 sample backward</p></li>
<li><p><strong>m</strong>: 1 sample forward</p></li>
<li><p><strong>i</strong>: zoom in</p></li>
<li><p><strong>o</strong>: zoom out</p></li>
<li><p><strong>n</strong>: whole zoom out</p></li>
<li><p><strong>a</strong>: start annotation</p></li>
<li><p><strong>z</strong>: stop annotation</p></li>
<li><p><strong>e</strong>: add annotation</p></li>
<li><p><strong>s</strong>: display annotations</p></li>
<li><p><strong>page down</strong>: switch to previous file (in long recordings only)</p></li>
<li><p><strong>page up</strong>: switch to next file (in long recordings only)</p></li>
<li><p><strong>home</strong>: set the position of the temporal cursor to the first sample of the current file</p></li>
<li><p><strong>end</strong>: set the position of the temporal cursor to the last sample of the current file</p></li>
<li><p><strong>d</strong> + <strong>control</strong> + <strong>shift</strong>: delete the display of annotation durations</p></li>
<li><p><strong>alt</strong>: show/hide the menu bar</p></li>
</ul>
</div>
<div class="section" id="mouse-click-on-the-signal-plots">
<h3>Mouse click on the signal plots<a class="headerlink" href="#mouse-click-on-the-signal-plots" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p><strong>left button</strong>: define the new position of the temporal cursor</p>
<blockquote>
<div><ul class="simple">
<li><p>with both <strong>control</strong> and <strong>shift</strong> pressed: delete the annotation that is clicked on (the label must be the current label)</p></li>
<li><p>with <strong>alt</strong> pressed: enable or disable to display the duration of the annotation that is clicked on (the label must be the current label)</p></li>
</ul>
</div></blockquote>
</li>
<li><p><strong>right button</strong>: zoom in (3 clicks: the first two to define the new temporal range, the third click must be inside the new temporal range in order to validate and zoom in, or outside to cancel)</p>
<blockquote>
<div><ul class="simple">
<li><p>with <strong>control</strong> pressed: add event annotation (3 clicks: the first two to define the start/stop of the annotation, the third click must be inside the temporal range in order to add the annotation, or outside to cancel)</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="userguide-configuration.html" class="btn btn-neutral float-right" title="User guide: configuration" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="install.html" class="btn btn-neutral float-left" title="Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020-2021, Université Rennes 1

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>